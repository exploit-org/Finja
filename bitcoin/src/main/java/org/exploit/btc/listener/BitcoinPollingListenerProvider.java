package org.exploit.btc.listener;

import lombok.RequiredArgsConstructor;
import org.exploit.btc.BitcoinProtocolProvider;
import org.exploit.finja.core.TransactionListener;
import org.exploit.finja.listener.ListenerProvider;
import org.exploit.finja.listener.PollingTxListener;
import org.exploit.finja.listener.config.PollingLimiterConfig;
import org.exploit.signalix.manager.EventScope;

@RequiredArgsConstructor
public class BitcoinPollingListenerProvider implements ListenerProvider<BitcoinProtocolProvider> {
    private final long pollIntervalSeconds;
    private final PollingLimiterConfig config;

    @Override
    public TransactionListener createListener(BitcoinProtocolProvider provider, EventScope eventScope) {
        return new PollingTxListener(provider.asset(), provider.eventFetcher(), config, pollIntervalSeconds, eventScope);
    }
}
