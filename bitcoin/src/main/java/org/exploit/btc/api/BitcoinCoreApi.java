package org.exploit.btc.api;

import com.fasterxml.jackson.databind.JsonNode;
import org.eclipse.jetty.http.HttpMethod;
import org.exploit.btc.model.core.FeeRate;
import org.exploit.btc.model.core.Multisig;
import org.exploit.finja.core.model.JsonRpc;
import org.exploit.finja.core.model.WebData;
import org.exploit.jettyx.annotation.Body;
import org.exploit.jettyx.annotation.ContentType;
import org.exploit.jettyx.annotation.HttpRequest;

import java.util.List;

public interface BitcoinCoreApi {
    @HttpRequest(method = HttpMethod.POST)
    @ContentType("application/json")
    Multisig multiSig(@Body JsonRpc body);

    @HttpRequest(method = HttpMethod.POST)
    @ContentType("application/json")
    List<String> deriveAddresses(@Body JsonRpc body);

    @HttpRequest(method = HttpMethod.POST)
    @ContentType("application/json")
    FeeRate estimateSmartFee(@Body JsonRpc body);

    @HttpRequest(method = HttpMethod.POST)
    @ContentType("application/json")
    String signMessageWithPrivateKey(@Body JsonRpc body);

    @HttpRequest(method = HttpMethod.POST)
    @ContentType("application/json")
    JsonNode sendJsonRpc(@Body JsonRpc body);

    static BitcoinCoreApi create(WebData webData) {
        return webData.newApiClient(BitcoinCoreApi.class);
    }
}
