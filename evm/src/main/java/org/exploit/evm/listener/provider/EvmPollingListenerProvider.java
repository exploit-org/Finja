package org.exploit.evm.listener.provider;

import org.exploit.evm.EvmProvider;
import org.exploit.finja.core.TransactionListener;
import org.exploit.finja.listener.ListenerProvider;
import org.exploit.finja.listener.PollingTxListener;
import org.exploit.finja.listener.config.PollingLimiterConfig;
import org.exploit.signalix.manager.EventScope;

public class EvmPollingListenerProvider implements ListenerProvider<EvmProvider> {
    private final long intervalSeconds;
    private final PollingLimiterConfig limiterConfig;

    public EvmPollingListenerProvider(long intervalSeconds, PollingLimiterConfig limiterConfig) {
        this.intervalSeconds = intervalSeconds;
        this.limiterConfig = limiterConfig;
    }

    @Override
    public TransactionListener createListener(EvmProvider provider, EventScope eventScope) {
        return new PollingTxListener(provider.asset(), provider.eventFetcher(), limiterConfig, intervalSeconds, eventScope);
    }
}
