package org.exploit.finja.core.model;

import io.github.bucket4j.Bucket;
import org.exploit.finja.utils.Api;
import org.exploit.jettyx.auth.Authorization;
import org.exploit.jettyx.auth.NoAuth;

public record WebData(String httpUrl, String wsUrl, Authorization auth) {
    public WebData() {
        this(null, null, new NoAuth());
    }

    public static WebData create(String url, String wsUrl, Authorization auth) {
        return new WebData(url, wsUrl, auth);
    }

    public static WebData create(String url, Authorization auth) {
        return new WebData(url, null, auth);
    }

    public <T> T newApiClient(Class<T> clazz) {
        return Api.getJettyx().newApiClient(httpUrl, auth)
                .create(clazz);
    }

    public <T> T newApiClient(Class<T> clazz, Bucket bucket) {
        return Api.getJettyx().newApiClient(httpUrl, auth, bucket)
                .create(clazz);
    }
}