package org.exploit.finja.core.event;

import lombok.*;
import org.exploit.finja.core.constant.Asset;
import org.exploit.finja.core.constant.TxType;
import org.exploit.finja.core.model.Value;
import org.exploit.signalix.marker.Event;

import java.util.HashMap;
import java.util.Map;

@AllArgsConstructor
@Getter
@Setter
@EqualsAndHashCode
@NoArgsConstructor
@Builder
public final class TxnEvent implements Event {
    private TxType type;

    private Asset asset;
    private String txid;
    private String address;
    private Value value;
    private String smartContract;

    private int confirmations;
    private long timestamp;

    private String memo;

    @Builder.Default
    private Map<String, Object> meta = new HashMap<>();

    public boolean confirmed() {
        return confirmations != 0;
    }

    public void newConfirmation() {
        confirmations++;
    }
}