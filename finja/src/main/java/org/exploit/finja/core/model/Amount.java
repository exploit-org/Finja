package org.exploit.finja.core.model;

import org.exploit.finja.core.CoinProvider;
import org.exploit.finja.core.constant.AmountUnit;

import java.math.BigDecimal;
import java.math.BigInteger;

public record Amount(BigDecimal value, AmountUnit amountUnit) {
    public BigInteger asUnit(CoinProvider<?> provider) {
        if (amountUnit == AmountUnit.UNIT)
            return value.toBigInteger();

        return provider.converter().toUnit(value);
    }

    public static Amount ofHuman(String value) {
        return ofHuman(new BigDecimal(value));
    }

    public static Amount ofHuman(BigDecimal value) {
        return new Amount(value, AmountUnit.HUMAN);
    }

    public static Amount ofUnit(BigInteger value) {
        return new Amount(new BigDecimal(value), AmountUnit.UNIT);
    }

    public static Amount of(BigDecimal value, AmountUnit amountUnit) {
        return new Amount(value, amountUnit);
    }
}