package org.exploit.finja.core.converter;

import org.exploit.finja.core.ValueConverter;

import java.math.BigDecimal;
import java.math.BigInteger;
import java.math.RoundingMode;

public interface ConstantConverter extends ValueConverter {
    @Override
    default BigInteger toUnit(BigDecimal amount) {
        var pow = BigDecimal.TEN.pow(decimals());
        return amount.multiply(pow).setScale(0, RoundingMode.HALF_EVEN).toBigInteger();
    }

    @Override
    default BigDecimal toHuman(BigInteger amount) {
        var pow = BigDecimal.TEN.pow(decimals());
        return new BigDecimal(amount)
                .divide(pow, decimals(), RoundingMode.HALF_EVEN)
                .setScale(decimals(), RoundingMode.HALF_EVEN);
    }

    int decimals();
}
