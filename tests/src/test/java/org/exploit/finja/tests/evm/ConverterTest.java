package org.exploit.finja.tests.evm;

import org.exploit.finja.core.model.WebData;
import org.exploit.evm.EvmProvider;
import org.exploit.evm.constant.ChainID;
import org.junit.jupiter.api.Test;

import java.math.BigDecimal;
import java.math.BigInteger;

import static org.junit.jupiter.api.Assertions.assertEquals;

public class ConverterTest {
    private final EvmProvider provider = EvmProvider.newBuilder()
            .node(WebData.create(null, null, null)) // Mock
            .chainId(ChainID.ETHEREUM)
            .build();

    @Test
    public void assertValidWeiConversion() {
        var wei = new BigInteger("1000000000000000000");
        var eth = provider.converter().toHuman(wei);

        assertEquals(0, eth.compareTo(BigDecimal.ONE));
    }

    @Test
    public void assertValidEthConversion() {
        var eth = BigDecimal.ONE;
        var wei = provider.converter().toUnit(eth);

        assertEquals(0, wei.compareTo(new BigInteger("1000000000000000000")));
    }
}
