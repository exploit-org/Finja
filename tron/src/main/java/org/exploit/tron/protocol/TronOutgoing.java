package org.exploit.tron.protocol;

import lombok.Getter;
import lombok.RequiredArgsConstructor;
import org.exploit.finja.core.OutgoingTransaction;
import org.exploit.finja.core.model.Receipt;
import org.exploit.finja.utils.Jackson;
import org.exploit.tron.protocol.transaction.Transaction;
import org.exploit.tron.service.TronTransactionService;

@RequiredArgsConstructor
public class TronOutgoing implements OutgoingTransaction {
    @Getter
    private final Transaction transaction;
    private final TronTransactionService transactionService;

    @Override
    public String dump() {
        return Jackson.writeAsString(transaction);
    }

    @Override
    public String computeTxid() {
        return transaction.rawData().txid();
    }

    @Override
    public Receipt send() {
        return transactionService.sendTransaction(transaction);
    }

    @Override
    public long fee() {
        return transaction.getFee();
    }
}