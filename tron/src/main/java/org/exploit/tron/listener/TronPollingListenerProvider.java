package org.exploit.tron.listener;

import lombok.RequiredArgsConstructor;
import org.exploit.finja.core.TransactionListener;
import org.exploit.finja.core.constant.Asset;
import org.exploit.finja.listener.ListenerProvider;
import org.exploit.finja.listener.PollingTxListener;
import org.exploit.finja.listener.config.PollingLimiterConfig;
import org.exploit.signalix.manager.EventScope;
import org.exploit.tron.TronProvider;

@RequiredArgsConstructor
public class TronPollingListenerProvider implements ListenerProvider<TronProvider> {
    private final long pollIntervalSeconds;
    private final PollingLimiterConfig limiterConfig;

    @Override
    public TransactionListener createListener(TronProvider provider, EventScope eventScope) {
        return new PollingTxListener(Asset.TRX, provider.eventFetcher(), limiterConfig, pollIntervalSeconds, eventScope);
    }
}
