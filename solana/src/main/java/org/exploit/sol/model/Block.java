package org.exploit.sol.model;

import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.databind.JsonNode;
import lombok.Data;

import java.util.List;

@Data
public class Block {
    @JsonProperty("blockHeight")
    private int blockHeight;

    @JsonProperty("blockTime")
    private Long blockTime;

    @JsonProperty("blockhash")
    private String blockhash;

    @JsonProperty("parentSlot")
    private int parentSlot;

    @JsonProperty("previousBlockhash")
    private String previousBlockhash;

    @JsonProperty("transactions")
    private List<Transaction> transactions;

    @Data
    public static class Transaction {
        @JsonProperty("meta")
        private Meta meta;

        @JsonProperty("transaction")
        private TransactionData transaction;
    }

    @Data
    public static class Meta {
        @JsonProperty("err")
        private JsonNode err;

        @JsonProperty("fee")
        private int fee;

        @JsonProperty("innerInstructions")
        private List<Instruction> innerInstructions;

        @JsonProperty("logMessages")
        private List<String> logMessages;

        @JsonProperty("postBalances")
        private List<Long> postBalances;

        @JsonProperty("postTokenBalances")
        private List<Object> postTokenBalances;

        @JsonProperty("preBalances")
        private List<Long> preBalances;

        @JsonProperty("preTokenBalances")
        private List<Object> preTokenBalances;

        @JsonProperty("rewards")
        private JsonNode rewards;

        @JsonProperty("status")
        private Status status;
    }

    @Data
    public static class Status {
        @JsonProperty("Ok")
        private JsonNode ok;
    }

    @Data
    public static class TransactionData {
        @JsonProperty("message")
        private Message message;

        @JsonProperty("signatures")
        private List<String> signatures;
    }

    @Data
    public static class Message {
        @JsonProperty("accountKeys")
        private List<String> accountKeys;

        @JsonProperty("header")
        private Header header;

        @JsonProperty("instructions")
        private List<Instruction> instructions;

        @JsonProperty("recentBlockhash")
        private String recentBlockhash;
    }

    @Data
    public static class Header {
        @JsonProperty("numReadonlySignedAccounts")
        private int numReadonlySignedAccounts;

        @JsonProperty("numReadonlyUnsignedAccounts")
        private int numReadonlyUnsignedAccounts;

        @JsonProperty("numRequiredSignatures")
        private int numRequiredSignatures;
    }

    @Data
    public static class Instruction {
        @JsonProperty("accounts")
        private List<Integer> accounts;

        @JsonProperty("data")
        private String data;

        @JsonProperty("programIdIndex")
        private int programIdIndex;
    }
}