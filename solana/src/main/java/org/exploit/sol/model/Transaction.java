package org.exploit.sol.model;

import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.databind.JsonNode;
import lombok.Data;

import java.util.List;

@Data
@JsonInclude(JsonInclude.Include.NON_NULL)
public class Transaction {
    private long blockTime;
    private Meta meta;
    private long slot;
    private TransactionData transaction;

    @Data
    public static class Meta {
        private int computeUnitsConsumed;
        private Integer err;
        private int fee;
        private List<Object> innerInstructions;
        private List<String> logMessages;
        private List<Long> postBalances;
        private List<Object> postTokenBalances;
        private List<Long> preBalances;
        private List<Object> preTokenBalances;
        private List<Object> rewards;
        private Status status;

        @Data
        public static class Status {
            private Object Ok;
        }
    }

    @Data
    public static class TransactionData {
        private Message message;
        private List<String> signatures;

        @Data
        public static class Message {
            private List<AccountKey> accountKeys;
            private List<Instruction> instructions;
            private String recentBlockhash;

            @Data
            public static class AccountKey {
                private String pubkey;
                private boolean signer;
                private String source;
                private boolean writable;
            }

            @Data
            public static class Instruction {
                private Parsed parsed;
                private String program;
                private String programId;
                private Integer stackHeight;

                @Data
                public static class Parsed {
                    private JsonNode info;
                    private String type;
                }
            }
        }

        @Data
        public static class Transfer {
            private String destination;
            private long lamports;
            private String source;
        }
    }
}