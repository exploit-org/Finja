package org.exploit.sol.util;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;

public class ShortVec {
    private ShortVec() {}

    public static byte[] encodeLength(int len) {
        var buffer = ByteBuffer.allocate(10).order(ByteOrder.LITTLE_ENDIAN);

        var cursor = 0;

        while (true) {
            var elem = len & 0x7F;
            len >>= 7;
            if (len == 0) {
                buffer.put((byte) elem);
                break;
            } else {
                elem |= 0x80;
                buffer.put((byte) elem);
                cursor += 1;
            }
        }
        var result = new byte[cursor + 1];
        buffer.rewind();
        buffer.get(result);

        return result;
    }
}
