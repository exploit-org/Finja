package org.exploit.sol.listener;

import lombok.AllArgsConstructor;
import lombok.NoArgsConstructor;
import org.exploit.finja.core.TransactionListener;
import org.exploit.finja.core.constant.Asset;
import org.exploit.finja.listener.ListenerProvider;
import org.exploit.finja.listener.PollingTxListener;
import org.exploit.finja.listener.config.PollingLimiterConfig;
import org.exploit.signalix.manager.EventScope;
import org.exploit.sol.SolanaProvider;

@AllArgsConstructor
@NoArgsConstructor
public class SolanaPollingListenerProvider implements ListenerProvider<SolanaProvider> {
    private long intervalSeconds = 5L;
    private PollingLimiterConfig limiterConfig = new PollingLimiterConfig();

    @Override
    public TransactionListener createListener(SolanaProvider provider, EventScope eventScope) {
        return new PollingTxListener(
                Asset.SOL, provider.eventFetcher(),
                limiterConfig, intervalSeconds, eventScope
        );
    }
}
